(function(t){function e(e){for(var o,i,u=e[0],s=e[1],c=e[2],l=0,d=[];l<u.length;l++)i=u[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);f&&f(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},r={app:0},a=[];function u(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-743e0f29":"0fc856db"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-743e0f29":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-743e0f29":"450334da"}[t]+".css",r=s.p+o,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var c=a[u],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===o||l===r))return e()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){c=d[u],l=c.getAttribute("data-href");if(l===o||l===r)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[t],f.parentNode.removeChild(f),n(a)},f.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){i[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise((function(e,n){o=r[t]=[e,n]}));e.push(o[2]=a);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",d.name="ChunkLoadError",d.type=o,d.request=i,n[1](d)}r[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var f=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},4099:function(t,e,n){"use strict";var o=n("b69f"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("ba4c"),i=n.n(o),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("manage-layout")],1)},a=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"special-monitor"},[n("div",{staticClass:"special-monitor__custom"},[t.isCustomEdit?t._e():[n("span",{staticClass:"custom__peizhi",on:{click:function(e){t.isCustomEdit=!0}}},[t._v("自定义配置")])],t.isCustomEdit?[n("span",{staticClass:"custom__manage",on:{click:function(e){t.isCustomShow=!0}}},[t._v("管理")]),n("span",{staticClass:"custom__save",on:{click:t.handleSave}},[t._v("保存")]),n("span",{staticClass:"custom__cancel",on:{click:t.handleCancel}},[t._v("取消")])]:t._e()],2),n("div",{ref:"RefBox",staticClass:"special-monitor__box"},[t.layout?[n("drag-layout",{ref:"RefGridBox",attrs:{layout:t.layout,tempLayout:t.tempLayout,draggable:t.draggable}})]:t._e()],2),t.isCustomShow?[n("el-dialog",{staticClass:"special-dialog",attrs:{title:"模块管理",width:"60%",visible:t.isCustomShow},on:{"update:visible":function(e){t.isCustomShow=e}}},[t._l(t.tempComponents,(function(e,o){return n("div",{key:"comp_"+o,staticClass:"modules-preview"},[n("div",{staticClass:"modules-preview-thumbnail"},[n("img",{attrs:{src:e.img,alt:""}})]),n("div",{staticClass:"modules-preview-bottom"},[n("span",[t._v(t._s(e.name))]),e.checked?n("button",{staticClass:"business-btn",attrs:{type:"error"},on:{click:function(t){e.checked=!e.checked}}},[t._v("禁用")]):t._e(),e.checked?t._e():n("button",{staticClass:"business-btn",attrs:{type:"primary"},on:{click:function(t){e.checked=!e.checked}}},[t._v("启用")])])])})),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.handleManageCancel}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleManageSave}},[t._v("确 定")])],1)],2)]:t._e()],2)},s=[],c=(n("c975"),n("d81d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"RefGridLayout",staticClass:"emergency-grid-layout"},[n("div",{staticClass:"e-layout",class:t.draggable?"e-layout-draggable":""},[n("grid-layout",{style:{height:"100%",width:"100%"},attrs:{layout:t.renderGridLayout,"col-num":t.colNum,"row-height":t.rowHeight,"is-draggable":t.draggable,"is-resizable":t.resizable,"is-mirrored":!1,"vertical-compact":!0,"prevent-collision":!1,"use-css-transforms":!0,margin:[2,2]},on:{"update:layout":function(e){t.renderGridLayout=e},"layout-updated":t.layoutUpdatedEvent}},t._l(t.renderGridLayout,(function(e){return n("grid-item",{key:e.i,class:{"drop-active":e.isActive},attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[e.moduleConfig?[n("transition",{attrs:{"enter-active-class":"animated flipInX","leave-active-class":"animated fadeOut",mode:"out-in",duration:{leave:300}}},[n(t.loadComponent(e.moduleConfig),{ref:e.moduleConfig.component_name,refInFor:!0,tag:"component",attrs:{config:e.moduleConfig.config}})],1)]:t._e()],2)})),1)],1)])}),l=[],d=(n("4de4"),n("7db0"),n("a9e3"),n("4160"),n("4ec9"),n("4fad"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("1276"),n("159b"),n("ddb0"),n("ade3")),f=(n("96cf"),n("1da1")),m=n("3835"),p={};function g(t){return new Promise((function(e,n){if(/(\.js)$/.test(t))window.require([t],(function(t){return e(t)}),(function(t){return n(t)}));else{var o=p[t];void 0===o?n("未在/views/index.js中输出该模块：".concat(t)):e("function"===typeof o?o():o)}}))}var y=n("bc3a"),v=n.n(y),b=(n("99af"),n("caad"),n("2532"),n("5319"),n("4478")),w=n("2909"),C=function(t,e){if(1===arguments.length&&(e=t,t=void 0),!e)return function(){};e.includes("return")||(e=e.replace(/^\s*/g,""),e="return "+e);try{return t?Object(b["a"])(Function,Object(w["a"])(t).concat([e])):new Function(e)}catch(n){throw window.console.warn("函数解析失败","'".concat(e,"'")),new Error("函数解析失败","'".concat(e,"'"))}},k=C,x=window.require,_={};function L(t){return new Promise(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(n){var o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=/(\.js)$/,i=/(\.json)$/,r=/^(api|\/api)/,!_[t]){e.next=7;break}n(_[t]),e.next=16;break;case 7:if("function"!==typeof t){e.next=15;break}return e.t0=n,e.next=11,t();case 11:e.t1=e.sent,(0,e.t0)(e.t1),e.next=16;break;case 15:i.test(t)?v.a.get(t,{baseURL:""}).then((function(e){var o=e.data;n(_[t]=o)})):r.test(t)?v.a.get(t).then((function(e){var o=e.data.data;n(_[t]=o)})):o.test(t)?x([t],(function(t){n(t)})):"[object Object]"===Object.prototype.toString.call(t)?n(t):n(k(t)());case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var j={render:function(){return h("div",{style:"width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;"},[h("svg",{attrs:{viewBox:"25 25 50 50"},style:"height: 42px; width: 42px; animation: loading-rotate 2s linear infinite;"},[h("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"},style:"animation: loading-dash 1.5s ease-in-out infinite; stroke-dasharray: 90,150; stroke-dashoffset: 0; stroke-width: 2; stroke: #409EFF; stroke-linecap: round;"})])])}},S={render:function(){return h("div",{style:"width: 100%; height: 100%; text-align: center; display: flex; flex-direction: column; justify-content: center; color: #e6a23c;background: #fff; font-size: 20px"},[h("el-icon",{class:"core-icon icon-ep-undefined",style:"margin: 12px;font-size: 130px"}),"模块开发中"])}},O=function(t){var e=5381,n=t.length;while(n)e=33*e^t.charCodeAt(--n);return e>>>0},M=function(t){return"[object Object]"===Object.prototype.toString.call(t)},E=new Map;function G(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.attach,a=o.loading,u=o.error;if(t){!0===a&&(a=j),!0===u&&(u=S);var s=O(JSON.stringify(arguments));if(E.has(s))return E.get(s);var c=function(){var n=t.split("#"),o=Object(m["a"])(n,2),s=o[0],c=o[1],l=new Promise(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(n){var o,a,u,l,f,h,p,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([g(s),L(e)]);case 3:u=t.sent,l=Object(m["a"])(u,2),o=l[0],a=l[1],t.next=14;break;case 9:throw t.prev=9,t.t0=t["catch"](0),window.console.log(t.t0),new Error(t.t0);case 14:f=!0===o.__esModule?o[c||"default"]:o,h=i.a.extend(f),p=void 0===r?a:Object(d["a"])({},r,a),y={},Object.entries(h.options.props||{}).forEach((function(t){var e=Object(m["a"])(t,2),n=e[0],o=e[1],i=p[n];y[n]=Object.assign({},o),void 0!==i&&(y[n].default=Array.isArray(i)||M(i)?function(){return i}:i,y[n].required=!1,y[n].__injected=i)})),n(h.extend({props:y}));case 20:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}());return{component:l,loading:a,error:u}};return E.set(s,c),c}}var R=G,B={methods:{getStorageItem:function(t){return window.localStorage.getItem(t)},setStorageItem:function(t,e){window.localStorage.setItem(t,e)},removeStorageItem:function(t,e){window.localStorage.removeItem(e)},clearStorage:function(t){window.localStorage.clear()}}},I=n("7be8"),$=[{id:"emergency-total",name:"应急统计",checked:!0,img:"./image.png",path:function(){return n.e("chunk-743e0f29").then(n.bind(null,"f50f"))}},{id:"risk-map",name:"区域风险图",checked:!0,img:"./image.png",path:function(){return n.e("chunk-743e0f29").then(n.bind(null,"f50f"))}},{id:"quick-entry",name:"快速入口",checked:!0,img:"./image.png",path:function(){return n.e("chunk-743e0f29").then(n.bind(null,"f50f"))}},{id:"patrol-monitor",name:"智能巡查监管",checked:!0,img:"./image.png",path:function(){return n.e("chunk-743e0f29").then(n.bind(null,"f50f"))}},{id:"danger-control",name:"隐患排查治理",checked:!0,img:"./image.png",path:function(){return n.e("chunk-743e0f29").then(n.bind(null,"f50f"))}},{id:"risk-control",name:"风险分级管控",checked:!0,img:"./image.png",path:function(){return n.e("chunk-743e0f29").then(n.bind(null,"f50f"))}}],T={mixins:[B],props:{layout:Object,tempLayout:Object,colNum:{type:Number,default:200},rowHeight:{type:Number,default:5},draggable:{type:Boolean,default:!1}},data:function(){return{gridWidth:null,gridHeight:null,resizable:!0,gridLayout:[],tempGridLayout:null,tempComponents:null}},components:{GridLayout:I["GridLayout"],GridItem:I["GridItem"]},computed:{renderGridLayout:function(){return this.tempGridLayout||this.gridLayout}},watch:{tempLayout:{deep:!0,handler:function(){var t=this.getLayoutRef(this.tempLayout);this.tempGridLayout=this.resetLayoutY(t)}},gridLayout:{deep:!0,handler:function(){console.log(11111)}}},mounted:function(){var t=this,e=this.getLayoutRef();this.$nextTick((function(){var n=t.$refs.RefGridLayout;t.gridWidth=n&&n.offsetWidth,t.gridHeight=n&&n.offsetHeight,t.gridLayout=t.resetLayoutY(e)})),this.getStorageItem("LayoutConfig")||this.setStorageItem("LayoutConfig",JSON.stringify(this.layout))},methods:{getLayoutRef:function(t){var e=t||JSON.parse(this.getStorageItem("LayoutConfig"))||this.layout;return e&&e.layout.map((function(t){t.moduleConfig=$.find((function(e){return e.id===t.relativeModule}))})),e},resetLayoutY:function(t){var e=this,n=t.height,o=t.layout,i=[];return o.map((function(t){var o=Object.assign({},t),r=e.gridHeight*Math.round(5*t.h+2*Math.max(0,t.h-1))/n;o.h=Math.round((r+2)/7),i.push(o)})),i.map((function(t){if(t.y){var o=e.gridHeight*Math.round(5*t.y+2*Math.max(0,t.y-1))/n;t.y=Math.round((o+2)/7)}})),i},layoutUpdatedEvent:function(t){this.tempComponents?this.resetGridComponents(this.tempComponents,t,this.gridHeight):this.tempGridLayout=t},loadComponent:function(t){return"string"===typeof t.path?R(t.path,t.config,null,{attach:"config"}):t.path},resetGridComponents:function(t,e,n){this.tempComponents=t||this.tempComponents;var o=this.tempComponents.filter((function(t){return t.checked})),i=n||this.layout.height,r=e||this.layout.layout,a=[],u=0;o.map((function(t){var e=r.find((function(e){return e.relativeModule===t.id}));e?a.push(Object.assign(e,{moduleConfig:t})):(a.push({x:u,y:0,w:100,h:50,static:!1,moved:!1,relativeModule:t.id,moduleConfig:t}),u+=110)})),this.tempGridLayout=this.resetLayoutY({height:i,layout:a})},resetTempLayout:function(){this.tempGridLayout=null,this.tempComponents=null;var t=this.getLayoutRef();this.gridLayout=this.resetLayoutY(t)}}},N=T,P=(n("4099"),n("2877")),A=Object(P["a"])(N,c,l,!1,null,null,null),H=A.exports,q={width:1820,height:860,layout:[{x:0,y:0,w:55,h:73,i:.7271820881916202,static:!1,moved:!1,relativeModule:"emergency-total"},{x:55,y:0,w:89,h:73,i:.551437528668036,static:!1,moved:!1,relativeModule:"risk-map"},{x:144,y:0,w:56,h:73,i:.32438539411038847,static:!1,moved:!1,relativeModule:"quick-entry"},{x:0,y:76,w:67,h:47,i:.6579331710523257,static:!1,moved:!1,relativeModule:"patrol-monitor"},{x:67,y:76,w:66,h:47,i:.25157126551881825,static:!1,moved:!1,relativeModule:"danger-control"},{x:133,y:76,w:67,h:47,i:.8237356221808765,static:!1,moved:!1,relativeModule:"risk-control"}]},J=n("53ca"),z=function t(e){var n=e instanceof Array?[]:{};for(var o in e)n[o]="object"===Object(J["a"])(e[o])?t(e[o]):e[o];return n},F={objDeepCopy:z},D={mixins:[B],data:function(){return{layout:null,tempLayout:null,isCustomEdit:!1,isCustomShow:!1,draggable:!1,components:$,tempComponents:null}},components:{DragLayout:H},watch:{isCustomEdit:function(){this.draggable=this.isCustomEdit},isCustomShow:function(){if(this.isCustomShow){var t=F.objDeepCopy(this.components);this.tempComponents=this.tempComponents||t}}},mounted:function(){this.layout=JSON.parse(this.getStorageItem("LayoutConfig"))||q;var t=this.layout.layout.map((function(t){return t.relativeModule}));this.components.map((function(e){e.checked=!!(t.indexOf(e.id)>-1)}))},methods:{handleCancel:function(){var t=this;this.$confirm("将放弃所有操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.isCustomEdit=!1,t.$refs.RefGridBox.resetTempLayout()}))},handleSave:function(){var t=this;this.$confirm("此操作将重新保存布局, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.$refs.RefGridBox.tempGridLayout,n=t.$refs.RefGridBox.gridWidth,o=t.$refs.RefGridBox.gridHeight;e&&t.setStorageItem("LayoutConfig",JSON.stringify({width:n,height:o,layout:e})),t.isCustomEdit=!1}))},handleManageCancel:function(){this.isCustomShow=!1,this.tempComponents=null},handleManageSave:function(){this.isCustomShow=!1,this.$refs.RefGridBox.resetGridComponents(this.tempComponents)}}},Y=D,U=(n("df1d"),Object(P["a"])(Y,u,s,!1,null,null,null)),W=U.exports,K={name:"App",components:{ManageLayout:W}},X=K,Q=(n("5c0b"),Object(P["a"])(X,r,a,!1,null,null,null)),V=Q.exports,Z=n("5c96"),tt=n.n(Z);n("0fae");i.a.use(tt.a),i.a.config.productionTip=!1,new i.a({render:function(t){return t(V)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),i=n.n(o);i.a},"7df1":function(t,e,n){},"9c0c":function(t,e,n){},b69f:function(t,e,n){},df1d:function(t,e,n){"use strict";var o=n("7df1"),i=n.n(o);i.a}});
//# sourceMappingURL=app.83793ac5.js.map